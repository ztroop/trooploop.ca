<!DOCTYPE html>
<html lang="en">
    <head>
        
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        

        <title></title>

        
            <link rel="stylesheet" href="https://trooploop.ca/theme.css">
        
        
    </head>
    <body>
        <div class="content">
        
        
            <header>
                <div class="header-left">
                    <a href="https:&#x2F;&#x2F;trooploop.ca" class="logo"></a>
                </div>
                <div class="header-right">
                    <nav itemscope itemtype="http://schema.org/SiteNavigationElement">
                        
                        
                            
                            <li class="nav">
                                <a itemprop="url" href="https://trooploop.ca/notes/">
                                    <span itemprop="name">Notes</span>
                                </a>
                            </li>
                        
                            
                            <li class="nav">
                                <a itemprop="url" href="https://trooploop.ca/about/">
                                    <span itemprop="name">About</span>
                                </a>
                            </li>
                        
                        
                        <li class="nav">
                            <a itemprop="url" href="https://github.com/ztroop">
                                <img class="icon" src="https:&#x2F;&#x2F;trooploop.ca/icons/github.svg" alt="Github">
                            </a>
                        </li>
                        
                        
                        <li class="nav">
                            <a itemprop="url" href="https://twitter.com/ztroopaloop">
                                <img class="icon" src="https:&#x2F;&#x2F;trooploop.ca/icons/twitter.svg" alt="Github">
                            </a>
                        </li>
                        
                    </nav>
                </div>
            </header>
        
        
        <main>
            
<article itemscope itemtype="http://schema.org/BlogPosting">
    <div itemprop="headline">
        <h1>OpenCV4 in Ubuntu Focal 20.04</h1>
        <div class="border"></div>
        <time datetime="2021-04-10" class="date" itemprop="datePublished">
            10 Apr 2021
        </time>
    </div>
    <div itemprop="articleBody">
        <p>The <code>opencv</code> version available in Ubuntu 20.04 is too old! We need a newer version!</p>
<p>We'll install from source. First, we need to install some dependencies:</p>
<pre style="background-color:#282a36;">
<code><span style="color:#50fa7b;">sudo</span><span style="color:#f8f8f2;"> apt install build-essential cmake git pkg-config libgtk-3-dev \
    libavcodec-dev libavformat-dev libswscale-dev libv4l-dev \
    libxvidcore-dev libx264-dev libjpeg-dev libpng-dev libtiff-dev \
    gfortran openexr libatlas-base-dev python3-dev python3-numpy \
    libtbb2 libtbb-dev libdc1394-22-dev
</span></code></pre>
<p>Clone the OpenCVâ€™s and OpenCV contrib repositories:</p>
<pre style="background-color:#282a36;">
<code><span style="color:#50fa7b;">mkdir </span><span style="color:#bd93f9;">~</span><span style="color:#f8f8f2;">/opencv_build </span><span style="color:#ff79c6;">&amp;&amp; </span><span style="color:#8be9fd;">cd </span><span style="color:#bd93f9;">~</span><span style="color:#f8f8f2;">/opencv_build
</span><span style="color:#50fa7b;">git</span><span style="color:#f8f8f2;"> clone https://github.com/opencv/opencv.git
</span><span style="color:#50fa7b;">git</span><span style="color:#f8f8f2;"> clone https://github.com/opencv/opencv_contrib.git
</span></code></pre>
<p>At the time of writing, the current version in the repositories is version 4.5.2.</p>
<p>If you want to install an older version of OpenCV, <code>cd</code> to both <code>opencv</code> and <code>opencv_contrib</code> directories and run <code>git checkout &lt;opencv-version&gt;</code>.</p>
<pre style="background-color:#282a36;">
<code><span style="color:#8be9fd;">cd </span><span style="color:#bd93f9;">~</span><span style="color:#f8f8f2;">/opencv_build/opencv
</span><span style="color:#50fa7b;">mkdir</span><span style="color:#f8f8f2;"> build </span><span style="color:#ff79c6;">&amp;&amp; </span><span style="color:#8be9fd;">cd</span><span style="color:#f8f8f2;"> build
</span></code></pre>
<p>Set up the OpenCV build with CMake:</p>
<pre style="background-color:#282a36;">
<code><span style="color:#50fa7b;">cmake</span><span style="font-style:italic;color:#ffb86c;"> -D</span><span style="color:#f8f8f2;"> CMAKE_BUILD_TYPE=RELEASE \
</span><span style="font-style:italic;color:#ffb86c;">    -D</span><span style="color:#f8f8f2;"> CMAKE_INSTALL_PREFIX=/usr/local \
</span><span style="font-style:italic;color:#ffb86c;">    -D</span><span style="color:#f8f8f2;"> INSTALL_C_EXAMPLES=ON \
</span><span style="font-style:italic;color:#ffb86c;">    -D</span><span style="color:#f8f8f2;"> INSTALL_PYTHON_EXAMPLES=ON \
</span><span style="font-style:italic;color:#ffb86c;">    -D</span><span style="color:#f8f8f2;"> OPENCV_GENERATE_PKGCONFIG=ON \
</span><span style="font-style:italic;color:#ffb86c;">    -D</span><span style="color:#f8f8f2;"> OPENCV_EXTRA_MODULES_PATH=</span><span style="color:#bd93f9;">~</span><span style="color:#f8f8f2;">/opencv_build/opencv_contrib/modules \
</span><span style="font-style:italic;color:#ffb86c;">    -D</span><span style="color:#f8f8f2;"> BUILD_EXAMPLES=ON ..
</span></code></pre>
<p>Start the compilation process:</p>
<pre style="background-color:#282a36;">
<code><span style="color:#50fa7b;">make</span><span style="font-style:italic;color:#ffb86c;"> -j8
</span></code></pre>
<p>Modify the <code>-j</code> flag according to the amount of CPU cores in your system.</p>
<p>To verify whether OpenCV has been installed successfully, run <code>pkg-config</code>:</p>
<pre style="background-color:#282a36;">
<code><span style="color:#50fa7b;">pkg-config</span><span style="font-style:italic;color:#ffb86c;"> --modversion</span><span style="color:#f8f8f2;"> opencv4
</span></code></pre>
<p>It's fortunate that this process isn't much different from <a href="https://linuxize.com/post/how-to-install-opencv-on-ubuntu-18-04/">18.04</a> instructions. ðŸ˜‰</p>

    </div>
</article>

        </main>
        
        <footer>
            
            <div class="border"></div>
            <div class="footer">
                <small class="footer-left">
                    Copyright &copy; Zackary Troop
                </small>
                <small class="footer-right">
                    Powered by <a href="https://www.getzola.org">Zola</a> | Theme <a href="https://github.com/ztroop/dracula-zen">Dracula Zen</a>
                </small>
            </div>
        
        </footer>
    
        </div>
    </body>
</html>
